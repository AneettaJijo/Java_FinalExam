<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Husky Air - New Reservation</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        label { display: inline-block; width: 160px; margin: 8px 0; }
        input, select { padding: 5px; width: 200px; }
        .error { color: red; font-size: 0.9em; margin-left: 10px; }
        .global-error { 
            background: #ffebee; 
            color: #c62828; 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 4px; 
            border: 1px solid #ef9a9a;
        }
    </style>
</head>
<body>
    <h2>Husky Air - Create Reservation</h2>
    <img src="/image.png" alt="Husky Air Logo" width="180" />

    <!-- Global Error Block -->
    <div th:if="${#fields.hasAnyErrors()}">
        <div class="global-error">
            <strong>Please fix the following errors:</strong><br/>
            <span th:each="err : ${#fields.allErrors}" th:text="${err}" class="error"></span><br/>
        </div>
    </div>

    <!-- Form with th:object -->
    <form th:action="@{/reservation/save}" th:object="${reservation}" method="post">

        <h3>üë§ Customer Details</h3>
        <label>First Name:</label>
        <input type="text" th:field="*{customer.firstName}" />
        <span class="error" th:if="${#fields.hasErrors('customer.firstName')}" th:errors="*{customer.firstName}">[[${#fields.errors('customer.firstName')}]]</span><br/>

        <label>Last Name:</label>
        <input type="text" th:field="*{customer.lastName}" />
        <span class="error" th:if="${#fields.hasErrors('customer.lastName')}" th:errors="*{customer.lastName}">[[${#fields.errors('customer.lastName')}]]</span><br/>

        <label>Email:</label>
        <input type="email" th:field="*{customer.email}" />
        <span class="error" th:if="${#fields.hasErrors('customer.email')}" th:errors="*{customer.email}">[[${#fields.errors('customer.email')}]]</span><br/>

        <label>Phone:</label>
        <input type="text" th:field="*{customer.phone}" />
        <span class="error" th:if="${#fields.hasErrors('customer.phone')}" th:errors="*{customer.phone}">[[${#fields.errors('customer.phone')}]]</span><br/>

        <label>Address:</label>
        <input type="text" th:field="*{customer.address}" /><br/>

        <h3>‚úàÔ∏è Reservation Info</h3>
        <label>Flight Number:</label>
        <input type="text" th:field="*{flightNumber}" />
        <span class="error" th:if="${#fields.hasErrors('flightNumber')}" th:errors="*{flightNumber}">[[${#fields.errors('flightNumber')}]]</span><br/>

        <label>Passengers:</label>
        <input type="number" th:field="*{numberOfPassengers}" min="1" />
        <span class="error" th:if="${#fields.hasErrors('numberOfPassengers')}" th:errors="*{numberOfPassengers}">[[${#fields.errors('numberOfPassengers')}]]</span><br/>

        <label>Date:</label>
        <input type="date" th:field="*{reservationDate}" />
        <span class="error" th:if="${#fields.hasErrors('reservationDate')}" th:errors="*{reservationDate}">[[${#fields.errors('reservationDate')}]]</span><br/>

        <label>Status:</label>
        <select th:field="*{status}">
            <option value="Pending">Pending</option>
            <option value="Confirmed">Confirmed</option>
            <option value="Cancelled">Cancelled</option>
        </select>
        <span class="error" th:if="${#fields.hasErrors('status')}" th:errors="*{status}">[[${#fields.errors('status')}]]</span><br/>

        <h3>üí≥ Payment Info</h3>
        <label>Amount ($):</label>
        <input type="number" step="0.01" th:field="*{payment.amount}" />
        <span class="error" th:if="${#fields.hasErrors('payment.amount')}" th:errors="*{payment.amount}">[[${#fields.errors('payment.amount')}]]</span><br/>

        <label>Method:</label>
        <select th:field="*{payment.method}">
            <option value="Credit Card">Credit Card</option>
            <option value="Debit Card">Debit Card</option>
            <option value="PayPal">PayPal</option>
        </select>
        <span class="error" th:if="${#fields.hasErrors('payment.method')}" th:errors="*{payment.method}">[[${#fields.errors('payment.method')}]]</span><br/>

        <label>Payment Status:</label>
        <select th:field="*{payment.status}">
            <option value="Pending">Pending</option>
            <option value="Paid">Paid</option>
        </select>
        <span class="error" th:if="${#fields.hasErrors('payment.status')}" th:errors="*{payment.status}">[[${#fields.errors('payment.status')}]]</span><br/>

        <button type="submit">Submit Reservation</button>
    </form> <!-- Make sure this is closed -->
</body>
</html>